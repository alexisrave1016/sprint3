(function(h){var l=window.AmazonUIPageJS||window.P,m=l._namespace||l.attributeErrors,d=m?m("ConsumerQuantityDiscountAssets",""):l;d.guardFatal?d.guardFatal(h)(d,window):d.execute(function(){h(d,window)})})(function(h,l,m){h.when("A","jQuery","a-carousel-framework","a-dropdown").execute("cqd-asset",function(d,a,n,A){function B(){a(".cqd-qp-filter-action").live("click",function(b){e.logCounter("QPQuantityTierFilterClickCount");a(".cqd-qp-filter-action").removeClass("selected");a(this).addClass("selected");
if(a(this).hasClass("cqd-qp-filter-block-all"))a(".cqd-qp-price-tiers").show(),a(".cqd-qp-price-tiers .cqd-qp-content-item").show(),a(".cqd-qp-content-item:visible:gt(9)").hide(),a(".cqd-qp-buy-more").length&&a(".cqd-qp-buy-more").show(),e.logCounter("QPQuantityTierFilterClickCount:all");else{b=a(this).attr("id");a(".cqd-qp-price-tiers").hide();a("."+b).show();a("."+b+" .cqd-qp-content-item").show();var c=a("."+b+" .cqd-qp-content-item").length;a(".cqd-qp-content-item:visible:gt(9)").hide();a(".cqd-qp-buy-more").length&&
(a(this).hasClass("cqd-qp-filter-block-last")||10<c?a(".cqd-qp-buy-more").show():a(".cqd-qp-buy-more").hide());e.logCounter("QPQuantityTierFilterClickCount:"+b)}})}function C(){a("#cqd-qp-select-section-icon").live("click",function(b){a(this).hasClass("cqd-qty-icon-chevron-down")?(a(this).removeClass("cqd-qty-icon-chevron-down"),a(this).addClass("cqd-qty-icon-chevron-up"),a("#cqd-qp-selector").hasClass("cqd-qp-selector-without-header")&&(a("#cqd-qp-selector").removeClass("cqd-qp-selector-without-header"),
a("#cqd-qp-selector").addClass("cqd-qp-selector-with-header")),a("#cqd-qp-selector").hasClass("cqd-qp-mb-selector-without-header")&&(a("#cqd-qp-selector").removeClass("cqd-qp-mb-selector-without-header"),a("#cqd-qp-selector").addClass("cqd-qp-mb-selector-with-header"))):(a(this).removeClass("cqd-qty-icon-chevron-up"),a(this).addClass("cqd-qty-icon-chevron-down"),a("#cqd-qp-selector").hasClass("cqd-qp-selector-with-header")&&(a("#cqd-qp-selector").removeClass("cqd-qp-selector-with-header"),a("#cqd-qp-selector").addClass("cqd-qp-selector-without-header")),
a("#cqd-qp-selector").hasClass("cqd-qp-mb-selector-with-header")&&(a("#cqd-qp-selector").removeClass("cqd-qp-mb-selector-with-header"),a("#cqd-qp-selector").addClass("cqd-qp-mb-selector-without-header")));a("#cqd-qty-header-content").toggle(function(){d.animate(a("#cqd-qty-header-content"),{right:"0px"},300,"ease-out",function(){k.updateQPSheetHeight()})})})}function D(){a("#cqd-qty-header-content:not(.cqd-qty-mb-header-content)").live("mouseenter",function(b){!a(this).hasClass("cqd-qty-mb-header-content")&&
4<=a(".cqd-qp-filter-action").size()&&a("#cqd-qty-header-content .a-carousel-left, #cqd-qty-header-content .a-carousel-right").show()});a("#cqd-qty-header-content:not(.cqd-qty-mb-header-content)").live("mouseleave",function(b){!a(this).hasClass("cqd-qty-mb-header-content")&&4<=a(".cqd-qp-filter-action").size()&&a("#cqd-qty-header-content .a-carousel-left, #cqd-qty-header-content .a-carousel-right").hide()})}function E(){a("#cqd-qp-buy-more-submit").live("click",function(b){if(!b.updateDeliveryBlockOnQuantityChange){e.logCounter("QPBuyMoreQuantitySelectedCount");
b.updateDeliveryBlockOnQuantityChange=1;var c=t();a(c+":checked").prop("checked",!1);var f=a("#buy-more-quantity").val(),u=a(".cqd-qty-buy-more-radio").find(c);u.attr("value",f);u.prop("checked",!0);var g=a("#buy-more-quantity").attr("min"),h=a("#buy-more-quantity").attr("max");b=parseInt(f)||0;g=parseInt(g)||1;h=parseInt(h)||-1;e.logCounter("QPBuyMoreQuantitySelectedCount:"+b);b<g||0<h&&b>h?(a("#buy-more-quantity").hasClass("a-form-error")||(a("#buy-more-quantity").addClass("a-form-error"),a("#cqd-qp-max-quantity-note").addClass("a-color-error"),
a("#cqd-qp-max-quantity-note").addClass("a-text-bold")),u.prop("checked",!1),a(c+":first").prop("checked",!0),c=a(c+":checked").val(),b=parseInt(c)||1,a("span#selectedQuantity").text(c),a("#cqd-qp-ingress-next-tier-qty").show(),a("#cqd-qp-offer-save-message-section").hide(),e.logCounter("QPBuyMoreQuantityErrorCount"),k.updateBottomSheet(b),v(c),w(c)):(a("#buy-more-quantity").hasClass("a-form-error")&&(a("#buy-more-quantity").removeClass("a-form-error"),a("#cqd-qp-max-quantity-note").removeClass("a-color-error"),
a("#cqd-qp-max-quantity-note").removeClass("a-text-bold")),1<f?(a("#cqd-qp-ingress-next-tier-qty").hide(),a("#twisterPlusPriceSubtotalWW_feature_div").length&&a("#twisterPlusPriceSubtotalWW_feature_div").hide(),a("#cqd-qp-offer-save-message-section").show()):(a("#cqd-qp-ingress-next-tier-qty").show(),a("#cqd-qp-offer-save-message-section").hide()),k.updateBottomSheet(b),v(f),w(f),p.animateCloseCQDQuantityPicker(),k.hideSheet(),d.hide(a("#cqd-background")))}});a("#buy-more-quantity").live("keydown",
function(b){switch(b.which){case 13:a("#cqd-qp-buy-more-submit").trigger("click"),b.preventDefault()}})}function F(){var b=t();a(b).live("change",function(c){e.logCounter("pricing:cqd:QPQuantitySelectedCount");a(".cqd-qty-buy-more-radio").find(b).prop("checked",!1);a("#buy-more-quantity").val("");a("#buy-more-quantity").hasClass("a-form-error")&&(a("#buy-more-quantity").removeClass("a-form-error"),a("#cqd-qp-max-quantity-note").removeClass("a-color-error"),a("#cqd-qp-max-quantity-note").removeClass("a-text-bold"));
c.updateDeliveryBlockOnQuantityChange||(c.updateDeliveryBlockOnQuantityChange=1,c=parseInt(a(this).val())||1,e.logCounter("pricing:cqd:QPQuantitySelectedCount:"+c),1<c?(a("#cqd-qp-ingress-next-tier-qty").hide(),a("#twisterPlusPriceSubtotalWW_feature_div").length&&a("#twisterPlusPriceSubtotalWW_feature_div").hide(),a("#cqd-qp-offer-save-message-section").show()):(a("#cqd-qp-ingress-next-tier-qty").show(),a("#cqd-qp-offer-save-message-section").hide()),k.updateBottomSheet(c),v(c),w(c),p.animateCloseCQDQuantityPicker(),
k.hideSheet(),d.hide(a("#cqd-background")))})}function v(b){a("#addToCart input#quantity").val(b);a("span#selectedQuantity").text(b);["quantity","mobileQuantityDropDown"].forEach(function(c){if(a("select#"+c+'[name\x3d"quantity"]').length){a("select#"+c).val(b).trigger("change");var f=A.getSelect(c);f&&f.val(b);d.trigger("a:dropdown:"+c+":select",{text:b,value:b})}else d.trigger("a:dropdown:"+c+":select",{value:b})})}function w(b){var c=a("#buybox"),f=c.find("#deliveryBlockSelectAsin").val(),d=c.find("#deliveryBlockSelectMerchant").val();
if(f&&d){var e=[];e.push("asin\x3d"+f);e.push("qt\x3d"+b);e.push("quantity\x3d"+b);e.push("merchantId\x3d"+d);G.sendAJAX(c,e)}}function H(){a(function(){if(a("#cqd-qp-ingress").length&&a("#cqd-qp-ingress").is(":visible")){e.logCounter("QPDisplayedCount");a("#twisterPlusPriceSubtotalWW_feature_div").length&&a("#twisterPlusPriceSubtotalWW_feature_div").hide();a("#cqd-qp-offer-save-message-section").hide();var b=t();a(b).length&&(a(b+":first").prop("checked",!0),b=a(b+":checked").val(),a("span#selectedQuantity").text(b));
k.updateFilterBlockDimensions()}})}function t(){return a("input[type\x3d'radio'][name\x3d'cqdQuantityRadio']").length?"input[type\x3d'radio'][name\x3d'cqdQuantityRadio']":"input[type\x3d'radio'][name\x3d'quantity']"}function y(){H();B();C();D();E();F()}var q=l.ue,z=!1,r=500,x=167,e={isNonEmptyString:function(a){return a!==m&&""!==a},logCounter:function(a,c){if(e.isNonEmptyString(a))a="pricing:cqd:"+a,q&&q.count&&(c===m&&(c=(q.count(a)||0)+1),q.count(a,c));else throw Error("counterKey must be non empty string");
},Timer:function(a){if(e.isNonEmptyString(a))this._timerName=a,this._startTime=0;else throw Error("timerName must be non empty string");}};e.Timer.prototype={start:function(){this._startTime=Date.now()},stop:function(){this._startTime&&e.logCounter(this._timerName,Date.now()-this._startTime)}};var p={animateOpenCQDQuantityPicker:function(){a("#cqd-web-qp-content").show(function(){d.animate(a("#cqd-web-qp-content"),{right:"0px"},300,"ease-out",function(){n.createAll();n.initializeAll();a("#cqd-qty-header-content .a-carousel-left, #cqd-qty-header-content .a-carousel-right").hide();
a("#cqd-qty-header-content li.a-carousel-card").css("visibility","");a(".cqd-qp-content-item:visible:gt(9)").hide();a("#cqd-web-qp-content .a-icon-close").show()})});a("body").css("overflow","hidden")},animateCloseCQDQuantityPicker:function(){var b="-"+(a("#cqd-web-qp-content").width()+50)+"px";d.animate(a("#cqd-web-qp-content"),{right:b},300,"ease-out",function(){a("#cqd-web-qp-content").css({right:"-800px"});a("#cqd-web-qp-content .a-icon-close").hide()});a("body").css("overflow","auto")}},k={showSheet:function(){h.when("a-sheet").execute("cqd-mobile-bottom-sheet-show",
function(a){var c=a.get("cqd-qp-bottom-sheet");c&&a.showSheet(c)})},hideSheet:function(){h.when("a-sheet").execute("cqd-mobile-bottom-sheet-hide",function(a){var c=a.get("cqd-qp-bottom-sheet");c&&a.hideSheet(c)})},updateQPSheetHeight:function(){var b=r-55,c=r-x;a(".cqd-qp-mb-selector-with-header").css("height",c);a(".cqd-qp-mb-selector-without-header").css("height",b)},updateFilterBlockDimensions:function(){var b=a("#cqd-qp-filter-block-1").height(),b=b+2;a(".cqd-qp-filter-block-all").css("height",
b);b/=2.5;a(".cqd-qp-filter-block-all-content").css("padding",b+"px 0px");x=a("#cqd-qty-header").height();x+=6},hideDetailsSheet:function(){h.when("a-sheet").execute("cqd-details-sheet-hide",function(a){var c=a.get("cqd-qp-details-sheet");c&&a.hideSheet(c)})},showDetailsSheet:function(){h.when("a-sheet").execute("cqd-details-sheet-show",function(a){var c=a.get("cqd-qp-details-sheet");c&&a.showSheet(c)})},updateBottomSheet:function(b){a(".cqd-qp-filter-block").each(function(c,f){f=a(f).find(".cqd-tier-details");
var d=f.find(".cqd-min-qty").text(),g=f.find(".cqd-max-qty").text(),d=parseInt(d)||0,g=parseInt(g)||0;if(b>=d){if(0>=g||b<=g)if(e.logCounter("QPOfferQuantitySelectedCount"),d=f.find(".cqd-savings").text(),g=f.find(".cqd-price").text(),c=f.find(".cqd-savings-perc").text(),f=f.find(".cqd-currency").text(),d=parseFloat(d)||-1,-1===d)a("#cqd-qp-ingress-next-tier-qty").show(),a("#cqd-qp-offer-save-message-section").hide();else return g=parseFloat(g)||0,a("#cqd-qp-savings-details-table").find("#cqd-qp-quantity").text(b),
a("#cqd-qp-savings-details-table").find("#cqd-qp-price-total").text(f+Number(b*(g+d)).toFixed(2)),a("#cqd-qp-savings-details-table").find("#cqd-qp-discount-value").text(c),a("#cqd-qp-savings-details-table").find("#cqd-qp-discount-price").text(f+Number(b*d).toFixed(2)),a("#cqd-qp-savings-details-table").find("#cqd-qp-subtotal").text(f+Number(b*g).toFixed(2)),a("#cqd-qp-offer-price").text(f+Number(b*g).toFixed(2)),a("#cqd-qp-offer-save").text(f+Number(b*d).toFixed(2)),!1}else 0===c&&(e.logCounter("QPNonOfferQuantitySelectedCount"),
a("#cqd-qp-ingress-next-tier-qty").show(),a("#cqd-qp-offer-save-message-section").hide())})}},G={sendAJAX:function(b,c){var d=new e.Timer("QuantityUpdateAjaxTimer");d.start();a.ajax({type:"POST",url:"/gp/product/features/dp-fast-track/udp-ajax-handler/get-quantity-update-message.html?ie\x3dUTF8",contentType:"application/x-www-form-urlencoded;charset\x3dutf-8",data:c.join("\x26"),accordionRow:b,dataType:"html",success:function(a){d.stop();null!==a&&""!==a&&b.find("#deliveryBlockMessage").replaceWith(a);
e.logCounter("QuantityUpdateAjaxSuccess")},error:function(a,b,c){d.stop();e.logCounter("QuantityUpdateAjaxError")}})}};d.declarative("a-sheet","click",function(a){k.showSheet()});d.declarative("cqd-side-sheet","click",function(b){e.logCounter("QPIngressButtonClickCount");d.show(a("#cqd-background"));p.animateOpenCQDQuantityPicker()});d.declarative("close-cqd-side-sheet","click",function(b){e.logCounter("QPCloseClickCount");p.animateCloseCQDQuantityPicker();d.hide(a("#cqd-background"));a("#buy-more-quantity").hasClass("a-form-error")&&
(a("#buy-more-quantity").val(""),a("#buy-more-quantity").removeClass("a-form-error"),a("#cqd-qp-max-quantity-note").removeClass("a-color-error"),a("#cqd-qp-max-quantity-note").removeClass("a-text-bold"))});d.on("a:sheet:changeHeight:cqd-qp-bottom-sheet",function(a){r=a.sheet.$container.height();k.updateQPSheetHeight()});d.on("a:sheet:afterShow:cqd-qp-details-sheet",function(a){e.logCounter("QPSavingDetailsClickCount")});d.on("a:sheet:afterShow:cqd-qp-bottom-sheet",function(b){e.logCounter("QPIngressButtonClickCount");
a(".cqd-qp-content-item:visible:gt(9)").hide();r=b.sheet.$container.height();z||(k.updateFilterBlockDimensions(),n.createAll(),n.initializeAll(),z=!0);k.updateQPSheetHeight()});d.on("a:popover:afterShow:cqd-qp-details-modal",function(a){e.logCounter("QPSavingDetailsClickCount")});d.on("load",function(){y()});d.on("a:pageUpdate",function(){y()})})});